"use strict";var express=require("express"),passport=require("passport"),router=express.Router(),Account=require("../models/account");router.get("/",function(e,r){r.render("index",{title:"ship App",user:e.user})}),router.get("/register",function(e,r){r.render("register",{title:"ship App Registration"})}),router.post("/register",function(s,n){Account.findOne({username:s.body.username}).then(function(e,r){if(e)return n.render("register",{title:"Registration",message:"Registration error",account:s.body.username});if(r=={})return n.render("register",{title:"Registration",message:"Existing User",account:s.body.username});var t=new Account({username:s.body.username});Account.register(t,s.body.password,function(e,r){return e?n.render("register",{title:"Registration",message:"access error",account:s.body.username}):r?(console.log("Sucess, redirect"),void n.redirect("/")):n.render("register",{title:"Registration",message:"access error",account:s.body.username})})})}),router.get("/login",function(e,r){r.render("login",{title:"ship App Login",user:e.user})}),router.post("/login",passport.authenticate("local"),function(e,r){e.session.returnTo&&r.redirect(e.session.returnTo),r.redirect("/")}),router.get("/logout",function(e,r,t){e.logout(function(e){if(e)return t(e);r.redirect("/")})}),router.get("/ping",function(e,r){r.status(200).send("pong!")}),module.exports=router;
//# sourceMappingURL=index.min.js.map

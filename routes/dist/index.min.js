"use strict";var express=require("express"),passport=require("passport"),router=express.Router(),Account=require("../models/account");router.get("/",function(e,r){r.render("index",{title:"ship App",user:e.user})}),router.get("/register",function(e,r){r.render("register",{title:"ship App Registration"})}),router.post("/register",function(n,s){Account.findOne({username:n.body.username}).then(function(e,r){if(e)return s.render("register",{title:"Registration",message:"Registration error",account:n.body.username});if(r=={})return s.render("register",{title:"Registration",message:"Existing User",account:n.body.username});var t=new Account({username:n.body.username});Account.register(t,n.body.password,function(e,r){return e?s.render("register",{title:"Registration",message:"access error",account:n.body.username}):r?(console.log("Sucess, redirect"),void s.redirect("/")):s.render("register",{title:"Registration",message:"access error",account:n.body.username})})})}),router.get("/login",function(e,r){r.render("login",{title:"ship App Login",user:e.user})}),router.post("/login",passport.authenticate("local"),function(e,r){r.redirect("/")}),router.get("/logout",function(e,r,t){e.logout(function(e){if(e)return t(e);r.redirect("/")})}),router.get("/ping",function(e,r){r.status(200).send("pong!")}),module.exports=router;
//# sourceMappingURL=index.min.js.map
